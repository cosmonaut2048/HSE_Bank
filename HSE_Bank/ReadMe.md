# Банк ВШЭ: Модуль Учета Финансов

## Описание

Консольное приложение, которое демонстрирует модуль финансового учета для приложения Банка ВШЭ. 
Приложение реализовано с использованием паттернов проектирования GoF, принципов SOLID и GRASP.

---
## Основной функционал

### 1. Управление счетами
- Создание новых банковских счетов
- Переименование счетов
- Просмотр всех счетов с информацией о балансе

### 2. Управление категориями
- Создание категорий доходов и расходов
- Просмотр всех категорий

### 3. Управление операциями
- Добавление операций доходов и расходов
- Фиксирование даты, суммы и описания операции
- Просмотр всех операций с сортировкой

### 4. Аналитика
- Подсчет сумм за выбранный период
- Анализ расходов/доходов по категориям
- Проверка аномалий в операциях

---
## Архитектура

### Паттерны GoF

#### 1. **Фасад (Facade)**
- **Файлы**: `Application/Facades/`
- **Компоненты**:
    - `AccountsFacade` - управление счетами
    - `CategoriesFacade` - управление категориями
    - `OperationsFacade` - управление операциями
    - `AnalyticsFacade` - работа с аналитикой

Упрощает взаимодействие консольного приложения с доменной моделью через единую точку входа для каждой области.

#### 2. **Команда (Command)**
- **Файлы**: `Application/Commands/`
- **Компоненты**:
    - `CreateAccount` - команда создания счета
    - `RenameAccount` - команда переименования счета
    - `AddOperation` - команда добавления операции
    - `DeleteOperation` - команда удаления операции

Инкапсулирует пользовательские сценарии в отдельные команды, позволяя их легко расширять и тестировать.

#### 3. **Декоратор (Decorator)**
- **Файлы**: `Application/Commands/Decorators/`
- **Компоненты**:
    - `TimedHandlerDecorator` - измеряет время выполнения команд
    - `LoggingHandlerDecorator` - логирует выполнение команд

Добавляет функциональность логирования и измерения времени ко всем командам без изменения их исходного кода.

#### 4. **Фабрика (Factory)**
- **Файлы**: `Domain/Factories/`
- **Компоненты**:
    - `IFinanceFactory` - интерфейс фабрики
    - `ValidatingFinanceFactory` - фабрика с валидацией

Гарантирует, что все доменные объекты (BankAccount, Operation, Category) создаются валидно в одном месте кода.

#### 5. **Посетитель (Visitor)**
- **Файлы**: `Application/Exporting/`

Позволяет экспортировать данные в разные форматы (JSON, CSV, YAML) без изменения доменных сущностей.

#### 6. **Прокси (Proxy)**
- **Файлы**: `InMemory/Proxies/`
- **Компоненты**:
    - `ReadOnlyGuardProxy` - защита от случайного изменения данных

Контролирует доступ к хранилищам и добавляет дополнительную логику безопасности.

#### 7. **Стратегия (Strategy)**
- **Файлы**: `Application/Analytics/`
- **Компоненты**:
    - `SumByPeriodStrategy` - анализ за период
    - `SumByCategoryStrategy` - анализ по категориям
    - `AnomalyCheckStrategy` - проверка аномалий

Инкапсулирует разные алгоритмы аналитики, позволяя выбирать нужную стратегию во время выполнения.

---
### Принципы SOLID

#### 1. **Single Responsibility Principle**
- Каждый фасад отвечает только за одну область (счета, категории, операции)
- Каждая команда отвечает за один сценарий
- Каждая стратегия аналитики решает одну задачу

**Примеры**:
- `AccountsFacade` - только управление счетами
- `CategoriesFacade` - только управление категориями
- `TimedHandlerDecorator` - только измерение времени

#### 2. **Open/Closed Principle**
- Можно добавлять новые команды без изменения существующих
- Можно добавлять новые стратегии аналитики через расширение
- Декораторы позволяют расширять поведение без изменения оригинального кода

**Примеры**:
- Новая аналитика = новая стратегия в `Analytics/`
- Новый обработчик команды не меняет существующие

#### 3. **Liskov Substitution Principle**
- Все реализации `ICommandHandler<T>` взаимозаменяемы
- Все реализации `IAnalyticsStrategy<TInput, TOutput>` взаимозаменяемы
- Все декораторы команд имеют одинаковый интерфейс с оригиналами

#### 4. **Interface Segregation Principle**
- `IAccountStore` - только операции со счетами
- `IOperationStore` - только операции с операциями
- `ICommandHandler<T>` - обобщенный интерфейс для всех команд
- Фасады разделены по функциям, не один огромный фасад

#### 5. **Dependency Inversion Principle**
- Все зависимости внедряются через конструкторы
- Используется `IServiceProvider` через `Bootstrapper`
- Высокоуровневые модули (Program.cs) зависят от абстракций (фасадов), а не от конкретных реализаций

---
### Принципы GRASP

#### 1. **High Cohesion**
- Методы в каждом классе тесно связаны между собой
- Фасады группируют связанные операции
- Стратегии аналитики сгруппированы логически

#### 2. **Low Coupling**
- Консольное приложение (Program.cs) не знает о внутренней структуре доменной модели
- Фасады скрывают детали реализации
- Команды независимы друг от друга
- Через интерфейсы достигается слабая связь между компонентами

---
## Запуск приложения

### Требования
- .NET 9.0 или выше

### Инструкции по запуску

#### В Rider / Visual Studio
- Установите стартовым проектом HSE_Bank и нажмите Run.
